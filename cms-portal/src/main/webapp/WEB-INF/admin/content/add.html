<#import "/layout/backend/main.ftl" as main>
<#import "/layout/backend/form.ftl" as form>

<@main.layout>
    <@form.layoutForm>
        <input type="hidden" name="modelId" value="${modelId!}"/>
        <@form.layoutItem label="上级栏目" required=true>
            <ul id="channelName"></ul>
        </@form.layoutItem>
        <@form.layoutItem label="专题" required=true>
            <ul id="tree"></ul>
        </@form.layoutItem>
        <@form.layoutSubmit></@form.layoutSubmit>
    </@form.layoutForm>
</@main.layout>
<link rel="stylesheet" href="${basePath}/admin/layui/layui_ext/dtree/dtree_select_tree.css">
<link rel="stylesheet" href="${basePath}/admin/layui/layui_ext/dtree/font/dtreefont.css">
<script>
    LayUtil.form.init(function () {

    })

    //下拉树形
    LayUtil.selectTree.init({
        elem: '#channelName',
        url: ADMIN_PATH + "/channel/tree.do",
        method: "post",
        title: "name",
        request: {orderBy: "parentId=asc"}
    },function(selectTree, channelTree){
        //专题下拉
        selectTree.render({
            elem: '#tree',
            url: ADMIN_PATH + "/topic/list.do",
            method: "post",
            title: "name"
        }, function (topicTree) {
            topicTree.on("node('tree')", function (obj) {
                $("#topicId").val(obj.param.nodeId);
            });
        });
    });
</script>